From c0f4c1710e3610e0e40a272f9e35ad1544718c7c Mon Sep 17 00:00:00 2001
From: Markus Volk <f_l_k@t-online.de>
Date: Mon, 19 Oct 2020 12:07:57 +0200
Subject: [PATCH] use playback_libeplayer3 for hisilicon

---
 libarmbox/Makefile.am              | 10 +++++-----
 libarmbox/playback_libeplayer3.cpp |  2 +-
 libarmbox/playback_libeplayer3.h   |  4 ++--
 3 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/libarmbox/Makefile.am b/libarmbox/Makefile.am
index 26e4d9d..36a548b 100644
--- a/libarmbox/Makefile.am
+++ b/libarmbox/Makefile.am
@@ -32,16 +32,16 @@ AM_LDFLAGS += \
 	-lgsttag-1.0 \
 	-lgstmpegts-1.0
 else
-if BOXMODEL_HISILICON
-libarmbox_la_SOURCES += \
-	playback_hisilicon.cpp
-else
+#if BOXMODEL_HISILICON
+#libarmbox_la_SOURCES += \
+#	playback_hisilicon.cpp
+#else
 libarmbox_la_SOURCES += \
 	playback_libeplayer3.cpp
 
 AM_CPPFLAGS += \
 	-I$(top_srcdir)/libeplayer3/include
-endif
+#endif
 
 AM_LDFLAGS += \
 	-lass
diff --git a/libarmbox/playback_libeplayer3.cpp b/libarmbox/playback_libeplayer3.cpp
index 9654ebf..2338584 100644
--- a/libarmbox/playback_libeplayer3.cpp
+++ b/libarmbox/playback_libeplayer3.cpp
@@ -722,7 +722,7 @@ int cPlayback::GetTeletextPid(void)
 }
 
 /* dummy functions for subtitles */
-void cPlayback::FindAllSubs(int * /*pids*/, unsigned int * /*supp*/, unsigned int *num, std::string * /*lang*/)
+void cPlayback::FindAllSubs(short unsigned int * /*pids*/, short unsigned int * /*supp*/, short unsigned int *num, std::string * /*lang*/)
 {
 	*num = 0;
 }
diff --git a/libarmbox/playback_libeplayer3.h b/libarmbox/playback_libeplayer3.h
index 9b1a0f7..547fd3f 100644
--- a/libarmbox/playback_libeplayer3.h
+++ b/libarmbox/playback_libeplayer3.h
@@ -58,8 +58,8 @@ class cPlayback
 		void GetPts(uint64_t &pts);
 		bool SetPosition(int position, bool absolute = false);
 		void FindAllPids(uint16_t *apids, unsigned short *ac3flags, uint16_t *numpida, std::string *language);
-		void FindAllSubs(int *pids, unsigned int *supported, unsigned int *numpida, std::string *language);
-		void FindAllSubs(uint16_t *pids, unsigned short *supported, uint16_t *numpida, std::string *language) { FindAllSubs((int*) pids, (unsigned int*) supported, (unsigned int*) numpida, language); };
+		void FindAllSubs(short unsigned int *pids, short unsigned int *supported, short unsigned int *numpida, std::string *language);
+
 		bool SelectSubtitles(int pid, std::string charset = "");
 		void FindAllSubtitlePids(int *pids, unsigned int *numpids, std::string *language);
 		void FindAllTeletextsubtitlePids(int */*pids*/, unsigned int *numpidt, std::string */*tlanguage*/, int */*mags*/, int */*pages*/);
