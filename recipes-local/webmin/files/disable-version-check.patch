From b7f88c3e3088ec9cf96dae7942ea211a6f73ae1e Mon Sep 17 00:00:00 2001
From: Markus Volk <f_l_k@t-online.de>
Date: Tue, 17 Apr 2018 01:18:05 +0200
Subject: [PATCH 2/2] disable-version-check

Signed-off-by: Markus Volk <f_l_k@t-online.de>
---
 webmin/webmin-lib.pl | 44 ++++++++++++++++++++++----------------------
 1 file changed, 22 insertions(+), 22 deletions(-)

diff --git a/webmin/webmin-lib.pl b/webmin/webmin-lib.pl
index dedf96c..1d4a430 100755
--- a/webmin/webmin-lib.pl
+++ b/webmin/webmin-lib.pl
@@ -1120,28 +1120,28 @@ my %miniserv;
 &load_theme_library();	# So that UI functions work
 
 # Need OS upgrade
-my %realos = &detect_operating_system(undef, 1);
-if (($realos{'os_version'} ne $gconfig{'os_version'} ||
-     $realos{'os_type'} ne $gconfig{'os_type'}) &&
-    $realos{'os_version'} && $realos{'os_type'} &&
-    &foreign_available("webmin")) {
-	my ($realminor) = split(/\./, $realos{'os_version'});
-	my ($minor) = split(/\./, $gconfig{'os_version'});
-	if ($realos{'os_type'} eq $gconfig{'os_type'} &&
-	    $realminor == $minor) {
-		# Only the minor version number changed - no need to apply
-		&apply_new_os_version(\%realos);
-		}
-	else {
-		# Large enough change to tell the user
-		push(@notifs,
-		    &ui_form_start("$gconfig{'webprefix'}/webmin/fix_os.cgi").
-		    &text('os_incorrect', $realos{'real_os_type'},
-		    		          $realos{'real_os_version'})."<p>\n".
-		    &ui_form_end([ [ undef, $text{'os_fix'} ] ])
-		    );
-		}
-	}
+#my %realos = &detect_operating_system(undef, 1);
+#if (($realos{'os_version'} ne $gconfig{'os_version'} ||
+#     $realos{'os_type'} ne $gconfig{'os_type'}) &&
+#    $realos{'os_version'} && $realos{'os_type'} &&
+#    &foreign_available("webmin")) {
+#	my ($realminor) = split(/\./, $realos{'os_version'});
+#	my ($minor) = split(/\./, $gconfig{'os_version'});
+#	if ($realos{'os_type'} eq $gconfig{'os_type'} &&
+#	    $realminor == $minor) {
+#		# Only the minor version number changed - no need to apply
+#		&apply_new_os_version(\%realos);
+#		}
+#	else {
+#		# Large enough change to tell the user
+#		push(@notifs,
+#		    &ui_form_start("$gconfig{'webprefix'}/webmin/fix_os.cgi").
+#		    &text('os_incorrect', $realos{'real_os_type'},
+#		    		          $realos{'real_os_version'})."<p>\n".
+#		    &ui_form_end([ [ undef, $text{'os_fix'} ] ])
+#		    );
+#		}
+#	}
 
 # Password close to expiry
 my $warn_days = $config{'warn_days'};
-- 
2.7.4

